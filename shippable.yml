language: python
python:
    - "2.7"
# install dependencies
install:
    - "pip install -r requirements.txt"
# run scripts
before_script:
    - mkdir -p shippable/codecoverage
    - mkdir -p shippable/testresults
# run tests
script:
    - nosetests --with-xunit --xunit-file=shippable/testresults/nosetests.xml
    - coverage run --branch web/tests.py
    - coverage xml -o shippable/codecoverage/coverage.xml web/tests.py
# send notifications
notifications:
    email:
        recipients:
            - michael@realpython.com
        on_success: change
        on_failure: always